"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[656],{190:function(e,t,s){s.r(t),s.d(t,{default:function(){return le}});var r=s(4112),i=s(3740),n=s(3698),o=s(2938),l=s(6092),a=s(3180),c=s(2050),m=s(8743),d=s(5803),u=(0,d.A)(c.Ql,m.A).extend({name:"v-chip-group",provide(){return{chipGroup:this}},props:{column:Boolean},computed:{classes(){return{...c.Ql.options.computed.classes.call(this),"v-chip-group":!0,"v-chip-group--column":this.column}}},watch:{column(e){e&&(this.scrollOffset=0),this.$nextTick(this.onResize)}},methods:{genData(){return this.setTextColor(this.color,{...c.Ql.options.methods.genData.call(this)})}}}),h=s(4414),p=s(3449),f=s(3064),v=s(1446),A=s(9483),g=s(5961),_=s(174),b=s(6930),S=s(8983),y=s(7296),C=s(2659),w=s(8924),F=s(6237),x=s(8907),k=s(1554),$=s(6355),O=s(569),j=s(6993),N=s(7717),T=s(7515),I=s(7018),q=s(3381),E=s(8944),R=s(4152),M=s(8041);const D=(0,d.A)(N.A,m.A,I.A,(0,T.P)("radioGroup"),q.A);var P=D.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:{type:Boolean,default:null},id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:{type:Boolean,default:null},value:{default:null}},data:()=>({isFocused:!1}),computed:{classes(){return{"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused,...this.themeClasses,...this.groupClasses}},computedColor(){if(!this.isDisabled)return E.A.options.computed.computedColor.call(this)},computedIcon(){return this.isActive?this.onIcon:this.offIcon},computedId(){return j.A.options.computed.computedId.call(this)},hasLabel:j.A.options.computed.hasLabel,hasState(){return(this.radioGroup||{}).hasState},isDisabled(){var e;return null!==(e=this.disabled)&&void 0!==e?e:!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly(){var e;return null!==(e=this.readonly)&&void 0!==e?e:!!this.radioGroup&&this.radioGroup.isReadonly},computedName(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||`radio-${this.radioGroup._uid}`},rippleState(){return E.A.options.computed.rippleState.call(this)},validationState(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput(e){return E.A.options.methods.genInput.call(this,"radio",e)},genLabel(){return this.hasLabel?this.$createElement($.A,{on:{click:E.F},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},(0,R.$c)(this,"label")||this.label):null},genRadio(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(O.A,this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput({name:this.computedName,value:this.value,...t}),this.genRipple(this.setTextColor(this.rippleState))])},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onChange(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:()=>{}},render(e){const t={staticClass:"v-radio",class:this.classes,on:(0,M.wf)({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return e("div",t,[this.genRadio(),this.genLabel()])}}),L=(s(5601),s(48));const B=(0,d.A)(L.C,j.A);var G=B.extend({name:"v-radio-group",provide(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes(){return{...j.A.options.computed.classes.call(this),"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row}}},methods:{genDefaultSlot(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},j.A.options.methods.genDefaultSlot.call(this))},genInputSlot(){const e=j.A.options.methods.genInputSlot.call(this);return delete e.data.on.click,e},genLabel(){const e=j.A.options.methods.genLabel.call(this);return e?(e.data.attrs.id=this.computedId,delete e.data.attrs.for,e.tag="legend",e):null},onClick:L.C.options.methods.onClick},render(e){const t=j.A.options.render.call(this,e);return this._b(t.data,"div",this.attrs$),t}}),U=s(2756),Y=s(5834),H=s(7150),z=s(1034),W=s(7732),Z=s(7917),Q=s(233),X=s(8124),V=s(3302),J=s(7112),K=s(7270),ee=function(){var e=this,t=e._self._c;return t(p.A,{staticClass:"pa-6",attrs:{fluid:""}},[t(x.A,{attrs:{value:e.loading}},[t(k.A,{attrs:{indeterminate:"",size:"64"}})],1),t(_.A,{ref:"form",attrs:{"lazy-validation":""}},[t(W.A,{staticClass:"mb-6 elevation-1",model:{value:e.currentStep,callback:function(t){e.currentStep=t},expression:"currentStep"}},[t(Q.vY,[e.isRegistrar?e._e():[t(X.A,{attrs:{complete:e.currentStep>1,step:"1"}},[e._v(" Student Type "),t("small",[e._v("New or Existing Student")])]),t(A.A)],t(X.A,{attrs:{complete:e.currentStep>2,step:e.isRegistrar?1:2}},[e._v(" Student Details "),t("small",[e._v("Basic Information")])]),t(A.A),t(X.A,{attrs:{complete:e.currentStep>3,step:e.isRegistrar?2:3}},[e._v(" Enrollment Details "),t("small",[e._v("Academic Information")])]),t(A.A),t(X.A,{attrs:{step:e.isRegistrar?3:4}},[e._v(" Review "),t("small",[e._v("Verify Details")])])],2),t(Q.WV,[e.isRegistrar?e._e():t(Z.A,{attrs:{step:"1"}},[t(n.A,{staticClass:"mb-6"},[t(o.ri,{staticClass:"headline primary white--text pa-2"},[e._v(" "+e._s(e.isProgramHead?"Select Student":"Select Student Type")+" ")]),t(o.OQ,{staticClass:"pa-6"},[e.isProgramHead?e._e():t(G,{attrs:{mandatory:""},model:{value:e.enrollmentForm.enrollmentType,callback:function(t){e.$set(e.enrollmentForm,"enrollmentType",t)},expression:"enrollmentForm.enrollmentType"}},[t(P,{attrs:{label:"New Student",value:"new"}}),t(P,{attrs:{label:"Existing Student",value:"old"}})],1),t(g.Qo,[e.isProgramHead||"old"===e.enrollmentForm.enrollmentType?t("div",[t(n.A,[t("div",{staticClass:"d-flex justify-end pa-4"},[t(J.A,{staticClass:"search-field",staticStyle:{"max-width":"400px"},attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Search students...","hide-details":"","single-line":"",filled:"",rounded:"",dense:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(f.A,{attrs:{headers:e.studentHeaders,items:e.filteredStudent,search:e.search,loading:e.loading,"single-select":"","show-select":""},on:{"item-selected":e.handleStudentSelect},scopedSlots:e._u([{key:"item.name",fn:function({item:s}){return[t("div",{staticClass:"d-flex align-center py-2"},[t(r.A,{staticClass:"mr-3",attrs:{color:"primary lighten-4",size:"40"}},[t("span",{staticClass:"primary--text font-weight-medium"},[e._v(" "+e._s(s.name.firstName[0])+e._s(s.name.surname[0])+" ")])]),t("div",{staticClass:"font-weight-medium"},[e._v(" "+e._s(s.name.surname)+", "+e._s(s.name.firstName)+" "+e._s(s.name.middleName?s.name.middleName[0]+".":"")+" "+e._s(s.name.nameExtension||"")+" ")])],1)]}},{key:"item.course",fn:function({item:s}){return[t(a.A,{attrs:{small:"",outlined:"",color:"primary"}},[e._v(" "+e._s(s.course.courseCode)+" ")])]}}],null,!1,192207247)})],1)],1):e._e()])],1)],1)],1),t(Z.A,{attrs:{step:"2"}},["new"===e.enrollmentForm.enrollmentType?t(n.A,{staticClass:"mb-6"},[t(o.ri,{staticClass:"headline primary white--text pa-2"},[e._v(" Student Information ")]),t(o.OQ,{staticClass:"pa-6"},[t(U.A,[t(h.A,{attrs:{cols:"12",md:"3"}},[t(J.A,{attrs:{label:"Surname*",outlined:"",dense:"",required:""},model:{value:e.studentForm.name.surname,callback:function(t){e.$set(e.studentForm.name,"surname",t)},expression:"studentForm.name.surname"}})],1),t(h.A,{attrs:{cols:"12",md:"3"}},[t(J.A,{attrs:{label:"First Name*",outlined:"",dense:"",required:""},model:{value:e.studentForm.name.firstName,callback:function(t){e.$set(e.studentForm.name,"firstName",t)},expression:"studentForm.name.firstName"}})],1),t(h.A,{attrs:{cols:"12",md:"3"}},[t(J.A,{attrs:{label:"Middle Name",outlined:"",dense:"",hint:"Optional","persistent-hint":""},model:{value:e.studentForm.name.middleName,callback:function(t){e.$set(e.studentForm.name,"middleName",t)},expression:"studentForm.name.middleName"}})],1),t(h.A,{attrs:{cols:"12",md:"3"}},[t(J.A,{attrs:{label:"Name Extension",outlined:"",dense:"",hint:"E.g., Jr., Sr., III","persistent-hint":""},model:{value:e.studentForm.name.nameExtension,callback:function(t){e.$set(e.studentForm.name,"nameExtension",t)},expression:"studentForm.name.nameExtension"}})],1)],1),t(U.A,[t(h.A,{attrs:{cols:"12",md:"3"}},[t(Y.A,{attrs:{items:["Male","Female"],label:"Gender",outlined:"",dense:""},model:{value:e.studentForm.personalInfo.gender,callback:function(t){e.$set(e.studentForm.personalInfo,"gender",t)},expression:"studentForm.personalInfo.gender"}})],1),t(h.A,{attrs:{cols:"12",md:"3"}},[t(F.A,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t(J.A,e._g(e._b({attrs:{label:"Date of Birth",readonly:"",outlined:"",dense:"","prepend-inner-icon":"mdi-calendar"},model:{value:e.formattedDateOfBirth,callback:function(t){e.formattedDateOfBirth=t},expression:"formattedDateOfBirth"}},"v-text-field",r,!1),s))]}}],null,!1,330019118),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[t(v.A,{on:{input:function(t){e.dateMenu=!1}},model:{value:e.studentForm.dateOfBirth,callback:function(t){e.$set(e.studentForm,"dateOfBirth",t)},expression:"studentForm.dateOfBirth"}})],1)],1),t(h.A,{attrs:{cols:"6"}},[t(J.A,{attrs:{label:"Home Address",outlined:"",dense:"",placeholder:"Enter complete address","prepend-inner-icon":"mdi-map-marker"},model:{value:e.studentForm.homeAddress,callback:function(t){e.$set(e.studentForm,"homeAddress",t)},expression:"studentForm.homeAddress"}})],1)],1)],1)],1):e._e(),t(n.A,{staticClass:"mb-6"},[t(o.ri,{staticClass:"headline primary white--text pa-2"},[e._v(" Required Documents "),t(z.A),t(K.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t(b.A,e._g(e._b({attrs:{color:"white"}},"v-icon",r,!1),s),[e._v(" mdi-information ")])]}}])},[t("span",[e._v("Please check documents that have been submitted")])])],1),t(o.OQ,{staticClass:"pa-6"},[t(U.A,[t(h.A,{attrs:{cols:"12",md:"6"}},[t(S.A,[t(y.A,[t(C.A,[t(l.A,{attrs:{color:"primary"},model:{value:e.enrollmentForm.requirements.form137,callback:function(t){e.$set(e.enrollmentForm.requirements,"form137",t)},expression:"enrollmentForm.requirements.form137"}})],1),t(w.pr,[t(w.UZ,[e._v("Form 137")]),t(w.w,[e._v(" Academic records from previous school ")])],1)],1),t(y.A,[t(C.A,[t(l.A,{attrs:{color:"primary"},model:{value:e.enrollmentForm.requirements.goodMoral,callback:function(t){e.$set(e.enrollmentForm.requirements,"goodMoral",t)},expression:"enrollmentForm.requirements.goodMoral"}})],1),t(w.pr,[t(w.UZ,[e._v("Good Moral Certificate")]),t(w.w,[e._v(" Character certification from previous school ")])],1)],1),t(y.A,[t(C.A,[t(l.A,{attrs:{color:"primary"},model:{value:e.enrollmentForm.requirements.birthCertificate,callback:function(t){e.$set(e.enrollmentForm.requirements,"birthCertificate",t)},expression:"\n                            enrollmentForm.requirements.birthCertificate\n                          "}})],1),t(w.pr,[t(w.UZ,[e._v("Birth Certificate")]),t(w.w,[e._v(" PSA/NSO authenticated copy ")])],1)],1)],1)],1),t(h.A,{attrs:{cols:"12",md:"6"}},[t(S.A,[t(y.A,[t(C.A,[t(l.A,{attrs:{color:"primary"},model:{value:e.enrollmentForm.requirements.pictures,callback:function(t){e.$set(e.enrollmentForm.requirements,"pictures",t)},expression:"enrollmentForm.requirements.pictures"}})],1),t(w.pr,[t(w.UZ,[e._v("2x2 Pictures")]),t(w.w,[e._v(" Recent ID photos (white background) ")])],1)],1),t(y.A,[t(C.A,[t(l.A,{attrs:{color:"primary"},model:{value:e.enrollmentForm.requirements.transcriptOfRecords,callback:function(t){e.$set(e.enrollmentForm.requirements,"transcriptOfRecords",t)},expression:"\n                            enrollmentForm.requirements.transcriptOfRecords\n                          "}})],1),t(w.pr,[t(w.UZ,[e._v("Transcript of Records")]),t(w.w,[e._v(" For transferee students only ")])],1)],1),t(y.A,[t(C.A,[t(l.A,{attrs:{color:"primary"},model:{value:e.enrollmentForm.requirements.placementForm,callback:function(t){e.$set(e.enrollmentForm.requirements,"placementForm",t)},expression:"enrollmentForm.requirements.placementForm"}})],1),t(w.pr,[t(w.UZ,[e._v("Placement Form")]),t(w.w,[e._v(" Student Evaluation ")])],1)],1)],1)],1)],1)],1)],1)],1),t(Z.A,{attrs:{step:"3"}},[t(n.A,{staticClass:"mb-6"},[t(o.ri,{staticClass:"headline primary white--text pa-2"},[e._v(" Enrollment Information ")]),t(o.OQ,{staticClass:"pa-6"},[t(U.A,[t(h.A,{attrs:{cols:"12",md:"6"}},[t(Y.A,{attrs:{items:e.academicYears,label:"Academic Year*",outlined:"",dense:"",required:""},model:{value:e.enrollmentForm.academicYear,callback:function(t){e.$set(e.enrollmentForm,"academicYear",t)},expression:"enrollmentForm.academicYear"}})],1),t(h.A,{attrs:{cols:"12",md:"6"}},[t(Y.A,{attrs:{items:["First","Second"],label:"Semester*",outlined:"",dense:"",required:""},model:{value:e.enrollmentForm.semester,callback:function(t){e.$set(e.enrollmentForm,"semester",t)},expression:"enrollmentForm.semester"}})],1),t(h.A,{attrs:{cols:"12",md:"6"}},[t(Y.A,{attrs:{items:[1,2,3,4],label:"Year Level*",outlined:"",dense:"",required:""},model:{value:e.enrollmentForm.yearLevel,callback:function(t){e.$set(e.enrollmentForm,"yearLevel",t)},expression:"enrollmentForm.yearLevel"}})],1),t(h.A,{attrs:{cols:"12",md:"6"}},[t(J.A,{attrs:{label:"Section*",outlined:"",dense:"",required:"",placeholder:"Enter section"},model:{value:e.enrollmentForm.section,callback:function(t){e.$set(e.enrollmentForm,"section",t)},expression:"enrollmentForm.section"}})],1),t(h.A,{attrs:{cols:"12",md:"6"}},[t(Y.A,{attrs:{items:e.courses,"item-text":"courseName","item-value":"_id",label:"Course*",outlined:"",dense:"","prepend-inner-icon":"mdi-school",required:""},model:{value:e.enrollmentForm.course,callback:function(t){e.$set(e.enrollmentForm,"course",t)},expression:"enrollmentForm.course"}})],1),t(h.A,{attrs:{cols:"12"}},[e.previousSubjects.length?t(n.A,{staticClass:"mb-6"},[t(o.ri,{staticClass:"headline primary white--text pa-2"},[e._v(" Previous Semester Subjects ")]),t(o.OQ,{staticClass:"pa-0"},[t(f.A,{attrs:{headers:e.previousSubjectHeaders,items:e.previousSubjects,dense:"","disable-sort":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.grade",fn:function({item:s}){return[t(a.A,{attrs:{small:"",outlined:"",color:"secondary"}},[e._v(" "+e._s(s.grade)+" ")])]}},{key:"item.remarks",fn:function({item:s}){return[t(a.A,{attrs:{small:"",color:e.getRemarksColor(s.remarks)}},[e._v(" "+e._s(s.remarks)+" ")])]}}],null,!1,783016528)})],1)],1):e._e(),t(Y.A,{attrs:{items:e.subjects,loading:e.loading,"item-text":"DescriptiveTitle","item-value":"_id",label:"Select Subjects*",outlined:"",dense:"",multiple:"",chips:"","menu-props":{maxHeight:"400px"}},scopedSlots:e._u([{key:"selection",fn:function({item:s,index:r}){return[r<2?t(a.A,{attrs:{small:"",close:""},on:{"click:close":function(t){return e.removeSubject(s._id)}}},[t("span",[e._v(e._s(s.catNo)+" - "+e._s(s.DescriptiveTitle))]),t(a.A,{staticClass:"ml-2 primary",attrs:{"x-small":""}},[e._v(e._s(s.units)+" units")])],1):e._e(),2===r?t("span",{staticClass:"grey--text caption"},[e._v(" (+"+e._s(e.enrollmentForm.subjects.length-2)+" others) ")]):e._e()]}},{key:"item",fn:function({item:s,attrs:r,on:i}){return[t(y.A,e._g(e._b({attrs:{disabled:!e.validatePrerequisites(s)}},"v-list-item",r,!1),i),[t(w.pr,[t(w.UZ,[e._v(" "+e._s(s.catNo)+" - "+e._s(s.DescriptiveTitle)+" "),t(a.A,{staticClass:"ml-2",attrs:{"x-small":"",color:"primary"}},[e._v(e._s(s.units)+" units")]),e.hasFailedPrerequisite(s)?t(a.A,{staticClass:"ml-2",attrs:{"x-small":"",color:"error"}},[e._v(" Failed Prerequisites ")]):e._e()],1),t(w.w,{staticClass:"caption"},[e._v(" Prerequisites: "+e._s(s.prerequisites.join(", ")||"None")+" ")])],1)],1)]}}]),model:{value:e.enrollmentForm.subjects,callback:function(t){e.$set(e.enrollmentForm,"subjects",t)},expression:"enrollmentForm.subjects"}}),t(n.A,{staticClass:"mt-4",attrs:{outlined:""}},[t(S.A,{attrs:{dense:""}},[t(V.A,[e._v("Selected Subjects")]),e._l(e.selectedSubjects,(function(s){return t(y.A,{key:s._id},[t(w.pr,[t(w.UZ,{staticClass:"d-flex align-center"},[t("span",[e._v(e._s(s.catNo)+" - "+e._s(s.DescriptiveTitle))]),t(a.A,{staticClass:"ml-2",attrs:{"x-small":"",color:"primary"}},[e._v(e._s(s.units)+" units")])],1),t(w.w,{staticClass:"caption"},[e._v(" Prerequisites: "+e._s(s.prerequisites.join(", ")||"None")+" ")])],1),t(C.A,[t(i.A,{attrs:{icon:"",small:"",color:"error"},on:{click:function(t){return e.removeSubject(s._id)}}},[t(b.A,[e._v("mdi-delete")])],1)],1)],1)})),e.selectedSubjects.length?e._e():t(y.A,[t(w.pr,[t(w.UZ,{staticClass:"text-center grey--text"},[e._v(" No subjects selected ")])],1)],1),t(A.A),t(y.A,[t(w.pr,[t(w.UZ,{staticClass:"font-weight-medium"},[e._v(" Total Units: "+e._s(e.totalUnits)+" ")])],1)],1)],2)],1)],1)],1)],1)],1)],1),t(Z.A,{attrs:{step:"4"}},[t(g.vt,[t("div",{staticClass:"form-section"},[t(n.A,{staticClass:"mb-6"},[t(o.ri,{staticClass:"headline primary white--text d-flex align-center pa-2"},[e._v(" Review Enrollment Details "),t(z.A)],1),t(o.OQ,{staticClass:"review-content py-4"},[t("div",{staticClass:"d-flex align-center mb-6"},[t(r.A,{staticClass:"mr-6",attrs:{size:"120",color:"grey lighten-2"}},[t(b.A,{attrs:{size:"48",color:"grey darken-2"}},[e._v("mdi-account")])],1),t("div",[t("div",{staticClass:"text-h4 primary--text mb-1"},[e._v(" "+e._s("new"===e.enrollmentForm.enrollmentType?`${e.studentForm.name.surname}, ${e.studentForm.name.firstName} ${e.studentForm.name.middleName||""} ${e.studentForm.name.nameExtension||""}`:e.getStudentFullName(e.selectedStudent))+" ")]),t("div",{staticClass:"text-h6 grey--text"},[e._v(" "+e._s(e.getCourseNameById(e.enrollmentForm.course))+" ")])])],1),t("div",{staticClass:"review-section mb-6"},[t("div",{staticClass:"section-header"},[t(b.A,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-school")]),t("span",{staticClass:"text-h6"},[e._v("Enrollment Information")]),t(i.A,{staticClass:"float-right",attrs:{text:"",small:"",color:"primary"},on:{click:function(t){return e.editSection(3)}}},[t(b.A,{attrs:{left:"",small:""}},[e._v("mdi-pencil")]),e._v(" Edit ")],1)],1),t(A.A,{staticClass:"my-3"}),t(U.A,{attrs:{dense:""}},[t(h.A,{attrs:{cols:"12",sm:"6",md:"4"}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-label"},[e._v("Academic Year")]),t("div",{staticClass:"info-value"},[e._v(" "+e._s(e.enrollmentForm.academicYear)+" ")])])]),t(h.A,{attrs:{cols:"12",sm:"6",md:"4"}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-label"},[e._v("Semester")]),t("div",{staticClass:"info-value"},[e._v(" "+e._s(e.enrollmentForm.semester)+" ")])])]),t(h.A,{attrs:{cols:"12",sm:"6",md:"4"}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-label"},[e._v("Year Level")]),t("div",{staticClass:"info-value"},[e._v(" "+e._s(e.enrollmentForm.yearLevel)+" ")])])]),t(h.A,{attrs:{cols:"12",sm:"6",md:"4"}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-label"},[e._v("Section")]),t("div",{staticClass:"info-value"},[e._v(" "+e._s(e.enrollmentForm.section)+" ")])])])],1)],1),"new"===e.enrollmentForm.enrollmentType?[t("div",{staticClass:"review-section mb-6"},[t("div",{staticClass:"section-header"},[t(b.A,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-account-details")]),t("span",{staticClass:"text-h6"},[e._v("Student Information")]),t(i.A,{staticClass:"float-right",attrs:{text:"",small:"",color:"primary"},on:{click:function(t){return e.editSection(2)}}},[t(b.A,{attrs:{left:"",small:""}},[e._v("mdi-pencil")]),e._v(" Edit ")],1)],1),t(A.A,{staticClass:"my-3"}),t(U.A,{attrs:{dense:""}},[t(h.A,{attrs:{cols:"12",sm:"6",md:"4"}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-label"},[e._v("Gender")]),t("div",{staticClass:"info-value"},[e._v(" "+e._s(e.studentForm.personalInfo.gender)+" ")])])]),t(h.A,{attrs:{cols:"12",sm:"6",md:"4"}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-label"},[e._v("Date of Birth")]),t("div",{staticClass:"info-value"},[e._v(" "+e._s(e.formattedDateOfBirth)+" ")])])]),t(h.A,{attrs:{cols:"12",sm:"6",md:"4"}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-label"},[e._v("Home Address")]),t("div",{staticClass:"info-value"},[e._v(" "+e._s(e.studentForm.homeAddress)+" ")])])])],1)],1),t("div",{staticClass:"review-section mb-6"},[t("div",{staticClass:"section-header"},[t(b.A,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-file-document")]),t("span",{staticClass:"text-h6"},[e._v("Required Documents")]),t(i.A,{staticClass:"float-right",attrs:{text:"",small:"",color:"primary"},on:{click:function(t){return e.editSection(2)}}},[t(b.A,{attrs:{left:"",small:""}},[e._v("mdi-pencil")]),e._v(" Edit ")],1)],1),t(A.A,{staticClass:"my-3"}),t(u,{attrs:{column:""}},[e.enrollmentForm.requirements.form137?t(a.A,{attrs:{small:""}},[e._v("Form 137")]):e._e(),e.enrollmentForm.requirements.goodMoral?t(a.A,{attrs:{small:""}},[e._v("Good Moral")]):e._e(),e.enrollmentForm.requirements.birthCertificate?t(a.A,{attrs:{small:""}},[e._v("Birth Certificate")]):e._e(),e.enrollmentForm.requirements.pictures?t(a.A,{attrs:{small:""}},[e._v("2x2 Pictures")]):e._e(),e.enrollmentForm.requirements.transcriptOfRecords?t(a.A,{attrs:{small:""}},[e._v("Transcript")]):e._e()],1)],1)]:e._e(),t("div",{staticClass:"review-section mb-6"},[t("div",{staticClass:"section-header"},[t(b.A,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-clipboard-list")]),t("span",{staticClass:"text-h6"},[e._v("Selected Subjects")]),t(i.A,{staticClass:"float-right",attrs:{text:"",small:"",color:"primary"},on:{click:function(t){return e.editSection(3)}}},[t(b.A,{attrs:{left:"",small:""}},[e._v("mdi-pencil")]),e._v(" Edit ")],1)],1),t(A.A,{staticClass:"my-3"}),t(n.A,{attrs:{outlined:""}},[t(S.A,{attrs:{dense:""}},[e._l(e.selectedSubjects,(function(s){return t(y.A,{key:s._id},[t(w.pr,[t(w.UZ,{staticClass:"d-flex align-center"},[t("span",[e._v(e._s(s.catNo)+" - "+e._s(s.DescriptiveTitle))]),t(a.A,{staticClass:"ml-2",attrs:{"x-small":"",color:"primary"}},[e._v(e._s(s.units)+" units")])],1),t(w.w,{staticClass:"caption"},[e._v(" Prerequisites: "+e._s(s.prerequisites.join(", ")||"None")+" ")])],1)],1)})),e.selectedSubjects.length?e._e():t(y.A,[t(w.pr,[t(w.UZ,{staticClass:"text-center grey--text"},[e._v(" No subjects selected ")])],1)],1),t(A.A),t(y.A,[t(w.pr,[t(w.UZ,{staticClass:"font-weight-medium"},[e._v(" Total Units: "+e._s(e.totalUnits)+" ")])],1)],1)],2)],1)],1),t(n.A,{staticClass:"mb-6",attrs:{outlined:""}},[t(o.OQ,[t(l.A,{staticClass:"mt-0",attrs:{color:"primary"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[e._v(" I confirm that all the information provided is accurate and complete. "),t("span",{staticClass:"red--text"},[e._v("*")])])]},proxy:!0}]),model:{value:e.confirmEnrollment,callback:function(t){e.confirmEnrollment=t},expression:"confirmEnrollment"}})],1)],1)],2)],1)],1)])],1)],1)],1),t(n.A,{staticClass:"mt-6",attrs:{flat:""}},[t(o.SL,[e.currentStep>1?t(i.A,{attrs:{text:"",color:"primary"},on:{click:e.previousStep}},[t(b.A,{attrs:{left:""}},[e._v("mdi-arrow-left")]),e._v(" Previous ")],1):e._e(),t(z.A),e.currentStep<4?t(i.A,{attrs:{color:"primary"},on:{click:e.nextStep}},[e._v(" Next "),t(b.A,{attrs:{right:""}},[e._v("mdi-arrow-right")])],1):t(i.A,{attrs:{color:"success",disabled:!e.confirmEnrollment,loading:e.loading},on:{click:e.submitEnrollment}},[e._v(" Submit "),t(b.A,{attrs:{right:""}},[e._v("mdi-check")])],1)],1)],1)],1),t(H.A,{attrs:{color:e.snackbar.color,timeout:e.snackbar.timeout},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(i.A,e._b({attrs:{text:""},on:{click:function(t){e.snackbar.show=!1}}},"v-btn",s,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[e._v(" "+e._s(e.snackbar.text)+" ")])],1)},te=[],se=(s(4114),s(5353)),re=(s(5093),{name:"EnrollmentStepper",data:()=>({search:"",studentHeaders:[{text:"Name",value:"name",template:"item.name"},{text:"Student ID",value:"studentId"},{text:"Course",value:"course",template:"item.course"}],dateMenu:!1,currentStep:1,loading:!1,confirmEnrollment:!1,selectedStudent:null,studentForm:{name:{surname:"",firstName:"",middleName:"",nameExtension:""},personalInfo:{gender:null},dateOfBirth:null,homeAddress:""},enrollmentForm:{enrollmentType:null,student:null,academicYear:"",semester:"",yearLevel:null,course:null,section:"",subjects:[],requirements:{form137:!1,goodMoral:!1,birthCertificate:!1,pictures:!1,transcriptOfRecords:!1}},availableSubjects:[],subjects:[],previousSubjectHeaders:[{text:"Subject Code",value:"catNo"},{text:"Description",value:"DescriptiveTitle"},{text:"Units",value:"units"},{text:"Grade",value:"grade"},{text:"Remarks",value:"remarks"}],previousSubjects:[],snackbar:{show:!1,text:"",color:"success",timeout:5e3}}),computed:{...(0,se.aH)("students",["students"]),...(0,se.aH)("courses",["courses"]),...(0,se.L8)("students",["filteredStudent"]),formattedDateOfBirth(){return this.studentForm.dateOfBirth?new Date(this.studentForm.dateOfBirth).toLocaleDateString():""},selectedSubjects(){return this.enrollmentForm.subjects.map((e=>this.subjects.find((t=>t._id===e)))).filter(Boolean)},totalUnits(){return this.selectedSubjects.reduce(((e,t)=>e+t.units),0)},userRoles(){const e=JSON.parse(localStorage.getItem("user"))?.user;return e?.role?.map((e=>e.name.toLowerCase()))||[]},isAdmin(){return this.userRoles.includes("admin")},isProgramHead(){return this.userRoles.includes("program head")},isRegistrar(){return this.userRoles.includes("registrar")},initialStep(){return this.isRegistrar?2:1},academicYears(){const e=2023,t=2030,s=[];for(let r=e;r<t;r++)s.push(`${r}-${r+1}`);return s}},methods:{...(0,se.i0)("students",["fetchStudents"]),...(0,se.i0)("courses",["fetchCourses"]),...(0,se.i0)("enrollments",["enrollNewStudent","enrollContinuingStudent"]),...(0,se.i0)("teacherLoad",["updateTeacherLoadStudents","fetchStudentSubjectGrade"]),getStatusColor(e){const t={pending:"warning",evaluated:"info",enrolled:"success"};return t[e]||"warning"},removeSubject(e){this.enrollmentForm.subjects=this.enrollmentForm.subjects.filter((t=>t!==e))},getGradeColor(e){return e>=75?"success":"error"},getRemarksColor(e){return"Passed"===e?"success":"error"},validatePrerequisites(e){return!e.prerequisites?.length||e.prerequisites.every((e=>{const t=this.previousSubjects.find((t=>t.catNo===e));return!!t&&"Passed"===t.remarks}))},hasFailedPrerequisite(e){return!!e.prerequisites?.length&&e.prerequisites.some((e=>{const t=this.previousSubjects.find((t=>t.catNo===e));return"Failed"===t?.remarks}))},nextStep(){this.validateCurrentStep()&&(1===this.currentStep&&(this.isProgramHead||"old"===this.enrollmentForm.enrollmentType)?this.currentStep=3:this.currentStep++)},editSection(e){this.currentStep=e},getStudentFullName(e){const t=this.students.find((t=>t._id===e));return t?t.fullName:""},getCourseNameById(e){const t=this.courses.find((t=>t._id===e));return t?t.courseName:""},previousStep(){this.isRegistrar&&this.currentStep<=2||(3!==this.currentStep||!this.isProgramHead&&"old"!==this.enrollmentForm.enrollmentType?this.currentStep--:this.currentStep=1)},validateCurrentStep(){return!(1===this.currentStep&&"old"===this.enrollmentForm.enrollmentType&&!this.selectedStudent)},handleStudentSelect(e){if(this.selectedStudent=e.item._id,this.selectedStudent){const e=this.students.find((e=>e._id===this.selectedStudent));e?.course&&(this.enrollmentForm.course=e.course)}},async fetchSubjects(){if(this.enrollmentForm.yearLevel&&this.enrollmentForm.semester&&this.enrollmentForm.course){const[e,t]=await Promise.all([this.$store.dispatch("subjects/fetchSubjects",{semester:this.enrollmentForm.semester,yearLevel:this.enrollmentForm.yearLevel,course:this.enrollmentForm.course}),this.fetchStudentSubjectGrade({semester:this.enrollmentForm.semester,yearLevel:this.enrollmentForm.yearLevel,course:this.enrollmentForm.course,student:this.selectedStudent,academicYear:this.enrollmentForm.academicYear})]);this.previousSubjects=t,this.subjects=e}},async submitEnrollment(){try{this.loading=!0;const e={academicYear:this.enrollmentForm.academicYear,semester:this.enrollmentForm.semester,yearLevel:this.enrollmentForm.yearLevel,course:this.enrollmentForm.course,enrollmentType:this.enrollmentForm.enrollmentType,subjects:this.enrollmentForm.subjects,enrollmentStatus:"evaluated"};let t;if("new"===this.enrollmentForm.enrollmentType){const s={name:this.studentForm.name,personalInfo:this.studentForm.personalInfo,dateOfBirth:this.studentForm.dateOfBirth,homeAddress:this.studentForm.homeAddress,requirements:this.enrollmentForm.requirements,course:this.enrollmentForm.course};t=await this.enrollNewStudent({studentData:s,enrollmentData:e})}else t=await this.enrollContinuingStudent({studentId:this.selectedStudent,enrollmentData:e});"success"===t.status&&(this.showMessage("Enrollment successfully submitted!","success"),this.resetForm(),this.currentStep=1,this.confirmEnrollment=!1)}catch(e){console.error("Error submitting enrollment:",e),this.showMessage(e.response.data.message)}finally{this.loading=!1}},showMessage(e,t="success"){this.snackbar.text=e,this.snackbar.color=t,this.snackbar.show=!0},resetForm(){this.enrollmentForm={enrollmentType:null,student:null,academicYear:"",semester:"",yearLevel:null,course:null,section:"",subjects:[],requirements:{form137:!1,goodMoral:!1,birthCertificate:!1,pictures:!1,transcriptOfRecords:!1}},this.studentForm={name:{surname:"",firstName:"",middleName:"",nameExtension:""},personalInfo:{gender:null},dateOfBirth:null,homeAddress:""},this.selectedStudent=null,this.search="",this.subjects=[],this.previousSubjects=[],this.dateMenu=!1,this.loading=!1,this.confirmEnrollment=!1,this.$refs.form&&(this.$refs.form.resetValidation(),this.$refs.form.reset()),this.snackbar={show:!1,text:"",color:"success",timeout:5e3},this.$refs.studentsTable&&this.$refs.studentsTable.clearSelection()}},async created(){try{this.loading=!0,await Promise.all([this.fetchStudents(),this.fetchCourses(),this.fetchSubjects()]),this.isProgramHead?this.enrollmentForm.enrollmentType="old":this.isRegistrar&&(this.enrollmentForm.enrollmentType="new"),this.currentStep=this.initialStep}catch(e){console.error("Error fetching initial data:",e)}finally{this.loading=!1}},watch:{"enrollmentForm.enrollmentType"(e){"new"===e&&(this.selectedStudent=null,this.search="")},"enrollmentForm.semester":{async handler(){this.enrollmentForm.subjects=[],await this.fetchSubjects()}},"enrollmentForm.yearLevel":{async handler(){this.enrollmentForm.subjects=[],await this.fetchSubjects()}},"enrollmentForm.course":{async handler(){this.enrollmentForm.subjects=[],await this.fetchSubjects()}},currentStep(e){this.$refs.form&&this.$refs.form.resetValidation()}}}),ie=re,ne=s(1656),oe=(0,ne.A)(ie,ee,te,!1,null,"3c85847e",null),le=oe.exports},2050:function(e,t,s){s.d(t,{Ql:function(){return p}});var r=s(569),i=s(5961),n=s(48),o=s(5054),l=s(5168),a=s(2699),c=s(5803),m=s(4152);function d(e){const t=.501,s=Math.abs(e);return Math.sign(e)*(s/((1/t-2)*(1-s)+1))}function u(e,t,s,r){const i=e.clientWidth,n=s?t.content-e.offsetLeft-i:e.offsetLeft;s&&(r=-r);const o=t.wrapper+r,l=i+n,a=.4*i;return n<=r?r=Math.max(n-a,0):o<=l&&(r=Math.min(r-(o-l-a),t.content-t.wrapper)),s?-r:r}function h(e,t,s){const{offsetLeft:r,clientWidth:i}=e;if(s){const e=t.content-r-i/2-t.wrapper/2;return-Math.min(t.content-t.wrapper,Math.max(0,e))}{const e=r+i/2-t.wrapper/2;return Math.min(t.content-t.wrapper,Math.max(0,e))}}const p=(0,c.A)(n.C,o.A).extend({name:"base-slide-group",directives:{Resize:l.A,Touch:a.A},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>"boolean"===typeof e||["always","never","desktop","mobile"].includes(e)}},data:()=>({isOverflowing:!1,resizeTimeout:0,startX:0,isSwipingHorizontal:!1,isSwiping:!1,scrollOffset:0,widths:{content:0,wrapper:0}}),computed:{canTouch(){return"undefined"!==typeof window},__cachedNext(){return this.genTransition("next")},__cachedPrev(){return this.genTransition("prev")},classes(){return{...n.C.options.computed.classes.call(this),"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing}},hasAffixes(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;case"never":return!1;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext(){if(!this.hasAffixes)return!1;const{content:e,wrapper:t}=this.widths;return e>Math.abs(this.scrollOffset)+t},hasPrev(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset(e){this.$vuetify.rtl&&(e=-e);let t=e<=0?d(-e):e>this.widths.content-this.widths.wrapper?-(this.widths.content-this.widths.wrapper)+d(this.widths.content-this.widths.wrapper-e):-e;this.$vuetify.rtl&&(t=-t),this.$refs.content.style.transform=`translateX(${t}px)`}},mounted(){if("undefined"!==typeof ResizeObserver){const e=new ResizeObserver((()=>{this.onResize()}));e.observe(this.$el),e.observe(this.$refs.content),this.$on("hook:destroyed",(()=>{e.disconnect()}))}else{let e=0;this.$on("hook:beforeUpdate",(()=>{var t;e=((null===(t=this.$refs.content)||void 0===t?void 0:t.children)||[]).length})),this.$on("hook:updated",(()=>{var t;e!==((null===(t=this.$refs.content)||void 0===t?void 0:t.children)||[]).length&&this.setWidths()}))}},methods:{onScroll(){this.$refs.wrapper.scrollLeft=0},onFocusin(e){if(this.isOverflowing)for(const t of(0,m.K9)(e))for(const e of this.items)if(e.$el===t)return void(this.scrollOffset=u(e.$el,this.widths,this.$vuetify.rtl,this.scrollOffset))},genNext(){const e=this.$scopedSlots.next?this.$scopedSlots.next({}):(0,m.$c)(this,"next")||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:()=>this.onAffixClick("next")},key:"next"},[e])},genContent(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content",on:{focusin:this.onFocusin}},(0,m.$c)(this))},genData(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon(e){let t=e;this.$vuetify.rtl&&"prev"===e?t="next":this.$vuetify.rtl&&"next"===e&&(t="prev");const s=`${e[0].toUpperCase()}${e.slice(1)}`,i=this[`has${s}`];return this.showArrows||i?this.$createElement(r.A,{props:{disabled:!i}},this[`${t}Icon`]):null},genPrev(){const e=this.$scopedSlots.prev?this.$scopedSlots.prev({}):(0,m.$c)(this,"prev")||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:()=>this.onAffixClick("prev")},key:"prev"},[e])},genTransition(e){return this.$createElement(i.mM,[this.genIcon(e)])},genWrapper(){return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:e=>this.overflowCheck(e,this.onTouchStart),move:e=>this.overflowCheck(e,this.onTouchMove),end:e=>this.overflowCheck(e,this.onTouchEnd)}}],ref:"wrapper",on:{scroll:this.onScroll}},[this.genContent()])},calculateNewOffset(e,t,s,r){const i=s?-1:1,n=i*r+("prev"===e?-1:1)*t.wrapper;return i*Math.max(Math.min(n,t.content-t.wrapper),0)},onAffixClick(e){this.$emit(`click:${e}`),this.scrollTo(e)},onResize(){this._isDestroyed||this.setWidths()},onTouchStart(e){const{content:t}=this.$refs;this.startX=this.scrollOffset+e.touchstartX,t.style.setProperty("transition","none"),t.style.setProperty("willChange","transform")},onTouchMove(e){if(this.canTouch){if(!this.isSwiping){const t=e.touchmoveX-e.touchstartX,s=e.touchmoveY-e.touchstartY;this.isSwipingHorizontal=Math.abs(t)>Math.abs(s),this.isSwiping=!0}this.isSwipingHorizontal&&(this.scrollOffset=this.startX-e.touchmoveX,document.documentElement.style.overflowY="hidden")}},onTouchEnd(){if(!this.canTouch)return;const{content:e,wrapper:t}=this.$refs,s=e.clientWidth-t.clientWidth;e.style.setProperty("transition",null),e.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-s&&(this.scrollOffset=-s):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=s&&(this.scrollOffset=s),this.isSwiping=!1,document.documentElement.style.removeProperty("overflow-y")},overflowCheck(e,t){e.stopPropagation(),this.isOverflowing&&t(e)},scrollIntoView(){if(!this.selectedItem&&this.items.length){const e=this.items[this.items.length-1].$el.getBoundingClientRect(),t=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&t.right<e.right||!this.$vuetify.rtl&&t.left>e.left)&&this.scrollTo("prev")}this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=h(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=u(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},scrollTo(e){this.scrollOffset=this.calculateNewOffset(e,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths(){window.requestAnimationFrame((()=>{if(this._isDestroyed)return;const{content:e,wrapper:t}=this.$refs;this.widths={content:e?e.clientWidth:0,wrapper:t?t.clientWidth:0},this.isOverflowing=this.widths.wrapper+1<this.widths.content,this.scrollIntoView()}))}},render(e){return e("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});p.extend({name:"v-slide-group",provide(){return{slideGroup:this}}})}}]);
//# sourceMappingURL=656.9437c9fd.js.map