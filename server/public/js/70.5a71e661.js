"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[70],{6685:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var s=a(3740),o=a(3698),r=a(2938),i=a(4414),n=a(3449),l=a(3064),c=a(1446),d=a(9991),m=a(174),f=a(6930),u=a(6237),p=a(2756),h=a(5834),k=a(7150),y=a(1034),v=a(7112),g=function(){var e=this,t=e._self._c;return t(n.A,[t(o.A,{staticClass:"mb-4"},[t(p.A,{attrs:{align:"center","no-gutters":""}},[t(i.A,{attrs:{cols:"12"}},[t("div",{staticClass:"d-flex justify-space-between pa-4"},[t(v.A,{staticClass:"search-field",staticStyle:{"max-width":"300px"},attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Search professors...","hide-details":"","single-line":"",filled:"",rounded:"",dense:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchProfessors.apply(null,arguments)}},model:{value:e.options.search,callback:function(t){e.$set(e.options,"search",t)},expression:"options.search"}}),t(s.A,{attrs:{color:"primary"},on:{click:e.openCreateDialog}},[t(f.A,{attrs:{left:""}},[e._v("mdi-plus")]),e._v(" New Professor ")],1)],1)])],1)],1),t(o.A,[t(l.A,{attrs:{headers:e.headers,items:e.filteredProfessor,loading:e.loading,options:e.options,"server-items-length":e.totalProfessors,"items-per-page":10},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.select",fn:function({item:a}){return[t(s.A,{attrs:{"x-small":"",color:"primary",dark:""},on:{click:function(t){return e.selectProfessor(a)}}},[e._v(" Select ")])]}},{key:"item.fullName",fn:function({item:t}){return[e._v(" "+e._s(`${t.name.surname}, ${t.name.firstName} ${t.name.middleName||""}${t.name.nameExtension?" "+t.name.nameExtension:""}`)+" ")]}},{key:"item.academicInfo.department",fn:function({item:t}){return[e._v(" "+e._s(t.academicInfo.department.name)+" ")]}},{key:"item.academicInfo.employmentStatus",fn:function({item:t}){return[e._v(" "+e._s(t.academicInfo.employmentStatus)+" ")]}},{key:"item.academicInfo.dateHired",fn:function({item:t}){return[e._v(" "+e._s(e.formatEmploymentDate(t.academicInfo.dateHired))+" ")]}},{key:"item.actions",fn:function({item:a}){return[t("div",{staticClass:"d-flex justify-end"},[t(s.A,{staticClass:"mr-2",attrs:{icon:"",small:"",color:"primary"},on:{click:function(t){return e.editProfessor(a)}}},[t(f.A,{attrs:{small:""}},[e._v("mdi-pencil")])],1),t(s.A,{attrs:{icon:"",small:"",color:"error"},on:{click:function(t){return e.confirmDelete(a)}}},[t(f.A,{attrs:{small:""}},[e._v("mdi-delete")])],1)],1)]}},{key:"no-data",fn:function(){return[t("div",{staticClass:"pa-8 text-center"},[t(f.A,{attrs:{size:"64",color:"grey lighten-1"}},[e._v("mdi-account-tie")]),t("div",{staticClass:"text-h6 grey--text text--darken-1 mt-4"},[e._v(" No professors found ")]),t("div",{staticClass:"text-body-2 grey--text mt-2"},[e._v(" Try adjusting your search or add a new professor ")])],1)]},proxy:!0}])})],1),t(d.A,{attrs:{"max-width":"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(o.A,[t(r.ri,{staticClass:"headline white--text d-flex align-center",staticStyle:{"background-color":"#a52a2a"}},[e._v(" "+e._s(e.editMode?"Edit Professor":"Create New Professor")+" "),t(y.A),t(s.A,{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[t(f.A,[e._v("mdi-close")])],1)],1),t(m.A,{ref:"form",on:{submit:function(e){e.preventDefault()}},model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[t(r.OQ,{staticClass:"pt-6"},[t(p.A,[t(i.A,{attrs:{cols:"12",md:"6"}},[t(v.A,{attrs:{rules:e.formRules.required,label:"First Name",required:"",outlined:"",dense:""},model:{value:e.form.name.firstName,callback:function(t){e.$set(e.form.name,"firstName",t)},expression:"form.name.firstName"}})],1),t(i.A,{attrs:{cols:"12",md:"6"}},[t(v.A,{attrs:{rules:e.formRules.required,label:"Last Name",required:"",outlined:"",dense:""},model:{value:e.form.name.surname,callback:function(t){e.$set(e.form.name,"surname",t)},expression:"form.name.surname"}})],1),t(i.A,{attrs:{cols:"12",md:"6"}},[t(v.A,{attrs:{label:"Middle Name",outlined:"",dense:""},model:{value:e.form.name.middleName,callback:function(t){e.$set(e.form.name,"middleName",t)},expression:"form.name.middleName"}})],1),t(i.A,{attrs:{cols:"12",md:"6"}},[t(v.A,{attrs:{label:"Name Extension",outlined:"",dense:""},model:{value:e.form.name.nameExtension,callback:function(t){e.$set(e.form.name,"nameExtension",t)},expression:"form.name.nameExtension"}})],1),t(i.A,{attrs:{cols:"12",md:"6"}},[t(v.A,{attrs:{rules:e.formRules.required,label:"Employee ID",required:"",outlined:"",dense:""},model:{value:e.form.employeeId,callback:function(t){e.$set(e.form,"employeeId",t)},expression:"form.employeeId"}})],1),t(i.A,{attrs:{cols:"12",md:"6"}},[t(h.A,{attrs:{items:e.departments,"item-text":"name","item-value":"_id",rules:e.formRules.required,label:"Department",required:"",outlined:"",dense:""},model:{value:e.form.academicInfo.department,callback:function(t){e.$set(e.form.academicInfo,"department",t)},expression:"form.academicInfo.department"}})],1),t(i.A,{attrs:{cols:"12",md:"6"}},[t(h.A,{attrs:{items:["full-time","part-time","adjunct","visiting"],label:"Employment Status",rules:e.formRules.required,required:"",outlined:"",dense:""},model:{value:e.form.academicInfo.employmentStatus,callback:function(t){e.$set(e.form.academicInfo,"employmentStatus",t)},expression:"form.academicInfo.employmentStatus"}})],1),t(i.A,{attrs:{cols:"12",md:"6"}},[t(u.A,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(v.A,e._g(e._b({attrs:{label:"Date Hired",readonly:"",outlined:"",dense:""},model:{value:e.form.academicInfo.dateHired,callback:function(t){e.$set(e.form.academicInfo,"dateHired",t)},expression:"form.academicInfo.dateHired"}},"v-text-field",s,!1),a))]}}]),model:{value:e.dateHiredMenu,callback:function(t){e.dateHiredMenu=t},expression:"dateHiredMenu"}},[t(c.A,{on:{input:function(t){e.dateHiredMenu=!1}},model:{value:e.form.academicInfo.dateHired,callback:function(t){e.$set(e.form.academicInfo,"dateHired",t)},expression:"form.academicInfo.dateHired"}})],1)],1),t(i.A,{attrs:{cols:"12",md:"6"}},[t(h.A,{attrs:{items:["active","inactive","on-leave","terminated"],label:"Account Status",outlined:"",dense:""},model:{value:e.form.accountStatus,callback:function(t){e.$set(e.form,"accountStatus",t)},expression:"form.accountStatus"}})],1)],1)],1),t(r.SL,[t(s.A,{attrs:{text:"",color:"grey darken-1"},on:{click:e.closeDialog}},[e._v(" Cancel ")]),t(y.A),t(s.A,{attrs:{color:"primary",loading:e.loading,disabled:!e.formValid},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.editMode?"Save Changes":"Create Professor")+" ")])],1)],1)],1)],1),t(d.A,{attrs:{"max-width":"400"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[t(o.A,[t(r.ri,{staticClass:"headline error--text"},[e._v("Confirm Delete")]),t(r.OQ,[e._v(" Are you sure you want to delete this professor? "),t("div",{staticClass:"mt-2"},[t("strong",[e._v(" "+e._s(e.professorToDelete?.name?.surname)+", "+e._s(e.professorToDelete?.name?.firstName)+" "+e._s(e.professorToDelete?.name?.middleName)+" ")])])]),t(r.SL,[t(y.A),t(s.A,{attrs:{color:"grey darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v(" Cancel ")]),t(s.A,{attrs:{color:"error",loading:e.loading},on:{click:e.handleDelete}},[e._v(" Delete ")])],1)],1)],1),t(k.A,{attrs:{color:e.snackbarColor,timeout:3e3,top:""},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t(s.A,e._b({attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",a,!1),[e._v("Close")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)},x=[],b=(a(4114),a(5353)),A=a(5093),_=a.n(A),D={name:"ProfessorListView",data:()=>({dialog:!1,deleteDialog:!1,dateHiredMenu:!1,formValid:!1,options:{page:1,itemsPerPage:10,search:""},headers:[{text:"Select",value:"select",sortable:!1,width:"80px"},{text:"Employee ID",value:"employeeId"},{text:"Name",value:"fullName"},{text:"Department",value:"academicInfo.department.name"},{text:"Position",value:"academicInfo.position"},{text:"Employment Status",value:"academicInfo.employmentStatus"},{text:"Date Hired",value:"academicInfo.dateHired"},{text:"Actions",value:"actions",sortable:!1,align:"end"}],form:{employeeId:"",name:{firstName:"",surname:"",middleName:"",nameExtension:""},academicInfo:{department:null,employmentStatus:"full-time",dateHired:null},accountStatus:"active",role:[]},rules:{required:[e=>!!e||"This field is required"]},editMode:!1,loading:!1,professorToDelete:null,snackbar:!1,snackbarColor:"",snackbarText:"",formRules:{required:[e=>!!e||"This field is required"]}}),computed:{...(0,b.aH)("professors",["professors","totalProfessors"]),...(0,b.aH)("departments",["departments"]),...(0,b.aH)("roles",["roles"]),...(0,b.L8)("professors",["filteredProfessor"])},methods:{...(0,b.i0)("professors",["fetchProfessors","createProfessor","updateProfessor","deleteProfessor"]),...(0,b.i0)("departments",["fetchDepartments"]),...(0,b.i0)("roles",["fetchRoles"]),formatEmploymentDate(e){return e?_()(e).format("YYYY-MM-DD"):"N/A"},resetForm(){this.form={employeeId:"",name:{surname:"",firstName:"",middleName:"",nameExtension:""},academicInfo:{department:null,position:"",employmentStatus:"",dateHired:""},accountStatus:"active"},this.$refs.form&&this.$refs.form.resetValidation()},openCreateDialog(){this.editMode=!1,this.dialog=!0,this.resetForm()},closeDialog(){this.dialog=!1,this.$nextTick((()=>{this.resetForm()}))},editProfessor(e){this.editMode=!0,this.form={_id:e._id,employeeId:e.employeeId,name:{...e.name},academicInfo:{...e.academicInfo,dateHired:_()(e.academicInfo.dateHired).format("YYYY-MM-DD")},accountStatus:e.accountStatus,role:e.role.map((e=>e._id))},this.dialog=!0},confirmDelete(e){this.professorToDelete=e,this.deleteDialog=!0},async handleSubmit(){if(this.$refs.form.validate()){this.loading=!0;try{const e=this.roles.find((e=>"professor"===e.name.toLowerCase()));if(!e)throw new Error("Professor role not found");this.form.role=[e._id],this.editMode?(await this.updateProfessor({id:this.form._id,professorData:this.form}),this.showSnackbarMessage("Professor updated successfully!","success")):(await this.createProfessor(this.form),this.showSnackbarMessage("Professor created successfully!","success")),this.closeDialog(),this.fetchProfessors()}catch(e){this.showSnackbarMessage(e.response?.data?.message||"An error occurred!","error")}finally{this.loading=!1}}},async handleDelete(){this.loading=!0;try{await this.deleteProfessor(this.professorToDelete._id),this.showSnackbarMessage("Professor deleted successfully!","success"),this.fetchProfessors()}catch(e){this.showSnackbarMessage(e.response?.data?.message||"Failed to delete professor!","error")}finally{this.loading=!1,this.deleteDialog=!1}},showSnackbarMessage(e,t){this.snackbarText=e,this.snackbarColor=t,this.snackbar=!0},async loadInitialData(){try{this.loading=!0,await Promise.all([this.fetchProfessors(),this.fetchDepartments(),this.fetchRoles()])}catch(e){this.showSnackbarMessage("Failed to load data","error")}finally{this.loading=!1}},selectProfessor(e){this.$router.push({name:"Teacher Profile",params:{id:e._id}})}},created(){this.loadInitialData(),console.log(localStorage.getItem("user"))}},I=D,S=a(1656),P=(0,S.A)(I,g,x,!1,null,"6affc094",null),w=P.exports}}]);
//# sourceMappingURL=70.5a71e661.js.map