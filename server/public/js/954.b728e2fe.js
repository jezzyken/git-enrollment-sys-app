"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[954],{1284:function(t,s,e){e.r(s),e.d(s,{default:function(){return y}});var i=e(3740),a=e(3698),r=e(2938),n=e(4414),o=e(3449),l=e(9483),d=e(174),h=e(2756),c=e(7150),u=e(1034),p=e(7112),v=function(){var t=this,s=t._self._c;return s(o.A,{staticClass:"py-6"},[s(a.A,{staticClass:"mx-auto",attrs:{"max-width":"700",elevation:"1"}},[s(r.ri,{staticClass:"text-h5 pa-4"},[t._v("Profile Settings")]),s(r.OQ,{staticClass:"pa-4"},[s(d.A,{ref:"form",model:{value:t.valid,callback:function(s){t.valid=s},expression:"valid"}},[s(h.A,[s(n.A,{attrs:{cols:"12"}},[s("div",{staticClass:"text-subtitle-1 mb-4"},[t._v("Account Information")]),"student"!==t.formData.roles?s(p.A,{staticClass:"mb-2",attrs:{label:"Email Address",rules:t.emailRules,type:"email",required:"",outlined:"",dense:""},model:{value:t.formData.email,callback:function(s){t.$set(t.formData,"email",s)},expression:"formData.email"}}):t._e(),s(p.A,{attrs:{label:"Username",required:"",outlined:"",dense:""},model:{value:t.formData.username,callback:function(s){t.$set(t.formData,"username",s)},expression:"formData.username"}})],1),s(n.A,{staticClass:"mt-4",attrs:{cols:"12"}},[s("div",{staticClass:"text-subtitle-1 mb-4"},[t._v("Change Password")]),s(p.A,{staticClass:"mb-2",attrs:{label:"Current Password","append-icon":t.showCurrentPassword?"mdi-eye":"mdi-eye-off",type:t.showCurrentPassword?"text":"password",rules:[t=>!this.passwordData.newPassword||(!!t||"Current password is required")],outlined:"",dense:""},on:{"click:append":function(s){t.showCurrentPassword=!t.showCurrentPassword}},model:{value:t.passwordData.currentPassword,callback:function(s){t.$set(t.passwordData,"currentPassword",s)},expression:"passwordData.currentPassword"}}),s(p.A,{staticClass:"mb-2",attrs:{label:"New Password","append-icon":t.showNewPassword?"mdi-eye":"mdi-eye-off",type:t.showNewPassword?"text":"password",rules:[t=>!this.passwordData.currentPassword||(!!t||"New password is required"),...t.passwordRules],outlined:"",dense:""},on:{"click:append":function(s){t.showNewPassword=!t.showNewPassword}},model:{value:t.passwordData.newPassword,callback:function(s){t.$set(t.passwordData,"newPassword",s)},expression:"passwordData.newPassword"}}),s(p.A,{attrs:{label:"Confirm New Password","append-icon":t.showConfirmPassword?"mdi-eye":"mdi-eye-off",type:t.showConfirmPassword?"text":"password",rules:[t=>!this.passwordData.newPassword||(!!t||"Please confirm your password"),t=>!this.passwordData.newPassword||(t===this.passwordData.newPassword||"Passwords do not match")],outlined:"",dense:""},on:{"click:append":function(s){t.showConfirmPassword=!t.showConfirmPassword}},model:{value:t.passwordData.confirmPassword,callback:function(s){t.$set(t.passwordData,"confirmPassword",s)},expression:"passwordData.confirmPassword"}})],1)],1)],1)],1),s(l.A),s(r.SL,{staticClass:"pa-4"},[s(u.A),s(i.A,{attrs:{color:"primary",disabled:!t.valid,loading:t.loading,"min-width":"120"},on:{click:t.updateProfile}},[t._v(" Save Changes ")])],1)],1),s(c.A,{attrs:{color:t.snackbar.color,timeout:"3000"},scopedSlots:t._u([{key:"action",fn:function({attrs:e}){return[s(i.A,t._b({attrs:{text:""},on:{click:function(s){t.snackbar.show=!1}}},"v-btn",e,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar.show,callback:function(s){t.$set(t.snackbar,"show",s)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.text)+" ")])],1)},m=[],w=e(5353),f={name:"UserProfile",data:()=>({valid:!1,loading:!1,showCurrentPassword:!1,showNewPassword:!1,showConfirmPassword:!1,formData:{email:"",username:"",roles:""},passwordData:{currentPassword:"",newPassword:"",confirmPassword:""},snackbar:{show:!1,text:"",color:"success"},emailRules:[t=>!!t||"E-mail is required",t=>/.+@.+\..+/.test(t)||"E-mail must be valid"],passwordRules:[t=>!t||t.length>=8||"Password must be at least 8 characters"]}),mounted(){this.fetchUserData()},methods:{...(0,w.i0)("users",["getUser","updateUser"]),async fetchUserData(){const t=JSON.parse(localStorage.getItem("user"));try{const s=await this.getUser(t._id),{email:e,username:i,roles:a}=s;this.formData={email:e,username:i,roles:a}}catch(s){this.showSnackbar("Error fetching user data","error"),console.error("Error fetching user data:",s)}},async updateProfile(){if(!this.$refs.form.validate())return;const t=JSON.parse(localStorage.getItem("user"));this.loading=!0;try{const s={email:this.formData.email,username:this.formData.username};if(this.passwordData.currentPassword&&this.passwordData.newPassword){if(this.passwordData.newPassword!==this.passwordData.confirmPassword)return void this.showSnackbar("Passwords do not match","error");s.currentPassword=this.passwordData.currentPassword,s.newPassword=this.passwordData.newPassword}else if(this.passwordData.currentPassword||this.passwordData.newPassword)return void this.showSnackbar("Both current and new password are required to change password","error");const e=await this.updateUser({id:t._id,userData:s});this.showSnackbar("Profile updated successfully","success"),this.$emit("profile-updated",e.data),this.passwordData.currentPassword="",this.passwordData.newPassword="",this.passwordData.confirmPassword=""}catch(s){this.showSnackbar(s.response?.data?.message||"Error updating profile","error"),console.error("Error updating profile:",s)}finally{this.loading=!1}},showSnackbar(t,s="success"){this.snackbar.text=t,this.snackbar.color=s,this.snackbar.show=!0}}},g=f,b=e(1656),k=(0,b.A)(g,v,m,!1,null,"0fab60ab",null),y=k.exports},3740:function(t,s,e){e.d(s,{A:function(){return w}});var i=e(9375),a=e(1554),r=a.A,n=e(7515),o=e(428),l=e(3251),d=e(6763),h=e(8418),c=e(9785),u=e(5803),p=e(6988),v=e(4152);const m=(0,u.A)(i.A,h.A,d.A,c.A,(0,n.P)("btnToggle"),(0,o.P)("inputValue"));var w=m.extend().extend({name:"v-btn",props:{activeClass:{type:String,default(){return this.btnToggle?this.btnToggle.activeClass:""}},block:Boolean,depressed:Boolean,fab:Boolean,icon:Boolean,loading:Boolean,outlined:Boolean,plain:Boolean,retainFocusOnClick:Boolean,rounded:Boolean,tag:{type:String,default:"button"},text:Boolean,tile:Boolean,type:{type:String,default:"button"},value:null},data:()=>({proxyClass:"v-btn--active"}),computed:{classes(){return{"v-btn":!0,...h.A.options.computed.classes.call(this),"v-btn--absolute":this.absolute,"v-btn--block":this.block,"v-btn--bottom":this.bottom,"v-btn--disabled":this.disabled,"v-btn--is-elevated":this.isElevated,"v-btn--fab":this.fab,"v-btn--fixed":this.fixed,"v-btn--has-bg":this.hasBg,"v-btn--icon":this.icon,"v-btn--left":this.left,"v-btn--loading":this.loading,"v-btn--outlined":this.outlined,"v-btn--plain":this.plain,"v-btn--right":this.right,"v-btn--round":this.isRound,"v-btn--rounded":this.rounded,"v-btn--router":this.to,"v-btn--text":this.text,"v-btn--tile":this.tile,"v-btn--top":this.top,...this.themeClasses,...this.groupClasses,...this.elevationClasses,...this.sizeableClasses}},computedElevation(){if(!this.disabled)return l.A.options.computed.computedElevation.call(this)},computedRipple(){var t;const s=!this.icon&&!this.fab||{circle:!0};return!this.disabled&&(null!==(t=this.ripple)&&void 0!==t?t:s)},hasBg(){return!this.text&&!this.plain&&!this.outlined&&!this.icon},isElevated(){return Boolean(!this.icon&&!this.text&&!this.outlined&&!this.depressed&&!this.disabled&&!this.plain&&(null==this.elevation||Number(this.elevation)>0))},isRound(){return Boolean(this.icon||this.fab)},styles(){return{...this.measurableStyles}}},created(){const t=[["flat","text"],["outline","outlined"],["round","rounded"]];t.forEach((([t,s])=>{this.$attrs.hasOwnProperty(t)&&(0,p.q4)(t,s,this)}))},methods:{click(t){!this.retainFocusOnClick&&!this.fab&&t.detail&&this.$el.blur(),this.$emit("click",t),this.btnToggle&&this.toggle()},genContent(){return this.$createElement("span",{staticClass:"v-btn__content"},(0,v.$c)(this))},genLoader(){return this.$createElement("span",{class:"v-btn__loader"},(0,v.$c)(this,"loader")||[this.$createElement(r,{props:{indeterminate:!0,size:23,width:2}})])}},render(t){const s=[this.genContent(),this.loading&&this.genLoader()],{tag:e,data:i}=this.generateRouteLink(),a=this.hasBg?this.setBackgroundColor:this.setTextColor;return"button"===e&&(i.attrs.type=this.type,i.attrs.disabled=this.disabled),i.attrs.value=["string","number"].includes(typeof this.value)?this.value:JSON.stringify(this.value),t(e,this.disabled?i:a(this.color,i),s)}})},9483:function(t,s,e){e.d(s,{A:function(){return a}});var i=e(3381),a=i.A.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let s;return this.$attrs.role&&"separator"!==this.$attrs.role||(s=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":s,...this.$attrs},on:this.$listeners})}})},174:function(t,s,e){e(4114);var i=e(5803),a=e(7717),r=e(7540),n=e(4152);s.A=(0,i.A)(a.A,(0,r.G)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const s=Object.values(t).includes(!0);this.$emit("input",!s)},deep:!0,immediate:!0}},methods:{watchInput(t){const s=t=>t.$watch("hasError",(s=>{this.$set(this.errorBag,t._uid,s)}),{immediate:!0}),e={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?e.shouldValidate=t.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(e.valid=s(t)))})):e.valid=s(t),e},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const s=this.inputs.find((s=>s._uid===t._uid));if(!s)return;const e=this.watchers.find((t=>t._uid===s._uid));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==s._uid)),this.inputs=this.inputs.filter((t=>t._uid!==s._uid)),this.$delete(this.errorBag,s._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},(0,n.$c)(this))}})},1034:function(t,s,e){e(158);var i=e(4152);s.A=(0,i.Gn)("spacer","div","v-spacer")},569:function(t,s,e){var i=e(6930);s.A=i.A},1554:function(t,s,e){e.d(s,{A:function(){return n}});var i=e(1677),a=e(8743),r=e(4152),n=a.A.extend({name:"v-progress-circular",directives:{intersect:i.A},props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},data:()=>({radius:20,isVisible:!0}),computed:{calculatedSize(){return Number(this.size)+(this.button?8:0)},circumference(){return 2*Math.PI*this.radius},classes(){return{"v-progress-circular--visible":this.isVisible,"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},strokeDashArray(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles(){return{height:(0,r.Dg)(this.calculatedSize),width:(0,r.Dg)(this.calculatedSize)}},svgStyles(){return{transform:`rotate(${Number(this.rotate)}deg)`}},viewBoxSize(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle(t,s){return this.$createElement("circle",{class:`v-progress-circular__${t}`,attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":s}})},genSvg(){const t=[this.indeterminate||this.genCircle("underlay",0),this.genCircle("overlay",this.strokeDashOffset)];return this.$createElement("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:`${this.viewBoxSize} ${this.viewBoxSize} ${2*this.viewBoxSize} ${2*this.viewBoxSize}`}},t)},genInfo(){return this.$createElement("div",{staticClass:"v-progress-circular__info"},(0,r.$c)(this))},onObserve(t,s,e){this.isVisible=e}},render(t){return t("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,directives:[{name:"intersect",value:this.onObserve}],style:this.styles,on:this.$listeners}),[this.genSvg(),this.genInfo()])}})},7150:function(t,s,e){e.d(s,{A:function(){return c}});var i=e(8184),a=e(8743),r=e(3381),n=e(428),o=e(6763),l=e(5803),d=e(4152),h=e(6988),c=(0,l.A)(i.A,a.A,n.A,(0,o.P)(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:t=>"string"===typeof t||!1===t},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:r.A.options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:t,bottom:s,footer:e,insetFooter:i,left:a,right:r,top:n}=this.$vuetify.application;return{paddingBottom:(0,d.Dg)(s+e+i),paddingLeft:(0,d.Dg)(a),paddingRight:(0,d.Dg)(r),paddingTop:(0,d.Dg)(t+n)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&(0,h.rq)("auto-height",this),0==this.timeout&&(0,h.CI)('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[(0,d.$c)(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[(0,d.$c)(this)])},genWrapper(){const t=this.hasBackground?this.setBackgroundColor:this.setTextColor,s=t(this.color,{staticClass:"v-snack__wrapper",class:i.A.options.computed.classes.call(this),style:i.A.options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",s,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const t=Number(this.timeout);this.isActive&&![0,-1].includes(t)&&(this.activeTimeout=window.setTimeout((()=>{this.isActive=!1}),t))}},render(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},7515:function(t,s,e){e.d(s,{P:function(){return a}});var i=e(7540);function a(t,s,e){return(0,i.W)(t,s,e).extend({name:"groupable",props:{activeClass:{type:String,default(){if(this[t])return this[t].activeClass}},disabled:Boolean},data(){return{isActive:!1}},computed:{groupClasses(){return this.activeClass?{[this.activeClass]:this.isActive}:{}}},created(){this[t]&&this[t].register(this)},beforeDestroy(){this[t]&&this[t].unregister(this)},methods:{toggle(t){this.disabled&&t?t.preventDefault():this.$emit("change")}}})}a("itemGroup")},7540:function(t,s,e){e.d(s,{G:function(){return o},W:function(){return n}});var i=e(5471),a=e(6988);function r(t,s){return()=>(0,a.OP)(`The ${t} component must be used inside a ${s}`)}function n(t,s,e){const a=s&&e?{register:r(s,e),unregister:r(s,e)}:null;return i.Ay.extend({name:"registrable-inject",inject:{[t]:{default:a}}})}function o(t,s=!1){return i.Ay.extend({name:"registrable-provide",provide(){return{[t]:s?this:{register:this.register,unregister:this.unregister}}}})}},428:function(t,s,e){e.d(s,{P:function(){return a}});var i=e(5471);function a(t="value",s="input"){return i.Ay.extend({name:"toggleable",model:{prop:t,event:s},props:{[t]:{required:!1}},data(){return{isActive:!!this[t]}},watch:{[t](t){this.isActive=!!t},isActive(e){!!e!==this[t]&&this.$emit(s,e)}}})}const r=a();s.A=r}}]);
//# sourceMappingURL=954.b728e2fe.js.map