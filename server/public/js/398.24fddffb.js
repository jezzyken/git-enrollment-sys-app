"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[398],{9323:function(t,e,s){s.r(e),s.d(e,{default:function(){return P}});var a=s(4112),n=s(3740),l=s(3698),i=s(2938),r=s(3180),o=s(4414),c=s(3449),d=s(3064),u=s(9991),m=s(6930),f=s(8983),p=s(7296),h=s(9136),v=s(8924),_=s(6237),y=s(1554),A=s(2756),g=s(4312),k=s(7150),b=s(1034),x=s(7112),C=function(){var t=this,e=t._self._c;return e(c.A,[e(l.A,{staticClass:"mb-4"},[e(A.A,{attrs:{align:"center","no-gutters":""}},[e(o.A,{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between pa-4"},[e(x.A,{staticClass:"search-field",staticStyle:{"max-width":"400px"},attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Search students...","hide-details":"","single-line":"",filled:"",rounded:"",dense:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.options.search,callback:function(e){t.$set(t.options,"search",e)},expression:"options.search"}}),e("div",{staticClass:"d-flex"},[e(_.A,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(n.A,t._g(t._b({staticClass:"mr-2",attrs:{outlined:"",color:"primary"}},"v-btn",a,!1),s),[e(m.A,{attrs:{left:""}},[t._v("mdi-filter")]),t._v(" Filter ")],1)]}}])},[e(l.A,{staticClass:"pa-4",attrs:{"min-width":"300"}},[e(g.A,{staticClass:"mb-2",attrs:{label:"Course",clearable:"",dense:"",outlined:""},model:{value:t.filters.course,callback:function(e){t.$set(t.filters,"course",e)},expression:"filters.course"}}),e(g.A,{staticClass:"mb-2",attrs:{label:"Year Level",items:[1,2,3,4],clearable:"",dense:"",outlined:""},model:{value:t.filters.year,callback:function(e){t.$set(t.filters,"year",e)},expression:"filters.year"}}),e(g.A,{attrs:{label:"Section",items:["A","B","C"],clearable:"",dense:"",outlined:""},model:{value:t.filters.section,callback:function(e){t.$set(t.filters,"section",e)},expression:"filters.section"}}),e("div",{staticClass:"d-flex justify-end mt-4"},[e(n.A,{staticClass:"mr-2",attrs:{text:""},on:{click:t.resetFilters}},[t._v("Reset")]),e(n.A,{attrs:{color:"primary"},on:{click:t.applyFilters}},[t._v("Apply")])],1)],1)],1),e(_.A,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(n.A,t._g(t._b({staticClass:"mr-2",attrs:{outlined:"",color:"primary"}},"v-btn",a,!1),s),[e(m.A,{attrs:{left:""}},[t._v("mdi-download")]),t._v(" Download ")],1)]}}])},[e(f.A,[e(p.A,{on:{click:t.downloadExcel}},[e(h.A,[e(m.A,[t._v("mdi-file-excel")])],1),e(v.UZ,[t._v("Excel")])],1),e(p.A,{on:{click:t.downloadPDF}},[e(h.A,[e(m.A,[t._v("mdi-file-pdf")])],1),e(v.UZ,[t._v("PDF")])],1)],1)],1),e(_.A,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(n.A,t._g(t._b({attrs:{color:"primary"}},"v-btn",a,!1),s),[e(m.A,{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Add Student ")],1)]}}])},[e(f.A,t._l(["New","Existing"],(function(s){return e(p.A,{key:s,attrs:{to:{name:"StudentForm",params:{action:"add"},query:{type:s.toLowerCase()}}}},[e(v.UZ,[t._v(t._s(s)+" Student")])],1)})),1)],1)],1)],1)])],1)],1),e(l.A,[e(d.A,{attrs:{headers:t.headers,items:t.students,loading:t.loading,options:t.options,"server-items-length":t.totalStudents,"footer-props":{"items-per-page-options":[10,25,50],showFirstLastPage:!0}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.user.fullName",fn:function({item:s}){return[e("div",{staticClass:"d-flex align-center py-2"},[e(a.A,{staticClass:"mr-3",attrs:{color:"primary lighten-4",size:"40"}},[e("span",{staticClass:"primary--text font-weight-medium"},[t._v(" "+t._s(s.name.firstName[0])+t._s(s.name.surname[0])+" ")])]),e("div",[e("div",{staticClass:"font-weight-medium"},[t._v(" "+t._s(s.name.surname)+", "+t._s(s.name.firstName)+" "+t._s(s.name.middleName?s.name.middleName[0]+".":"")+" "+t._s(s.name.nameExtension||"")+" ")])])],1)]}},{key:"item.course",fn:function({item:s}){return[e(r.A,{attrs:{small:"",outlined:"",color:"primary"}},[t._v(" "+t._s(s.course.courseCode)+" ")])]}},{key:"item.enrollmentStatus",fn:function({item:s}){return[e(r.A,{staticClass:"text-capitalize",attrs:{color:t.getStatusColor(s.enrollments?.[0]?.enrollmentStatus),small:""}},[t._v(" "+t._s(s.enrollments?.[0]?.enrollmentStatus||"pending")+" ")])]}},{key:"item.actions",fn:function({item:s}){return[e("div",{staticClass:"d-flex justify-end"},[e(n.A,{attrs:{icon:"",small:"",color:"info"},on:{click:function(e){return t.selectStudent(s)}}},[e(m.A,{attrs:{small:""}},[t._v("mdi-eye")])],1),e(n.A,{attrs:{icon:"",small:"",color:"primary",to:{name:"StudentForm",params:{action:"edit"},query:{studentId:s._id}}}},[e(m.A,{attrs:{small:""}},[t._v("mdi-pencil")])],1),e(n.A,{attrs:{icon:"",small:"",color:"error"},on:{click:function(e){return t.confirmDelete(s)}}},[e(m.A,{attrs:{small:""}},[t._v("mdi-delete")])],1)],1)]}},{key:"no-data",fn:function(){return[e("div",{staticClass:"pa-8 text-center"},[e(m.A,{attrs:{size:"64",color:"grey lighten-1"}},[t._v("mdi-account-school-outline")]),e("div",{staticClass:"text-h6 grey--text text--darken-1 mt-4"},[t._v(" No students found ")]),e("div",{staticClass:"text-body-2 grey--text mt-2"},[t._v(" Try adjusting your search or filters ")])],1)]},proxy:!0},{key:"loading",fn:function(){return[e("div",{staticClass:"pa-8 text-center"},[e(y.A,{attrs:{indeterminate:"",color:"primary",size:"64"}}),e("div",{staticClass:"text-h6 primary--text mt-4"},[t._v("Loading students...")])],1)]},proxy:!0}])})],1),e(u.A,{attrs:{"max-width":"400"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[e(l.A,[e(i.ri,{staticClass:"error--text"},[e(m.A,{attrs:{left:"",color:"error"}},[t._v("mdi-alert-circle")]),t._v(" Confirm Delete ")],1),e(i.OQ,{staticClass:"pt-4"},[t._v(" Are you sure you want to delete this student record? "),e("div",{staticClass:"mt-4 pa-4 grey lighten-4 rounded"},[e("div",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.studentToDelete?.user?.firstName)+" "+t._s(t.studentToDelete?.user?.lastName)+" ")]),e("div",{staticClass:"caption text-medium-emphasis"},[t._v(" ID: "+t._s(t.studentToDelete?.studentId)+" ")])])]),e(i.SL,[e(b.A),e(n.A,{attrs:{text:""},on:{click:function(e){t.deleteDialog=!1}}},[t._v("Cancel")]),e(n.A,{attrs:{color:"error",loading:t.loading},on:{click:t.handleDelete}},[t._v("Delete")])],1)],1)],1),e(k.A,{attrs:{color:t.snackbarColor,timeout:4e3,top:"",right:""},scopedSlots:t._u([{key:"action",fn:function({attrs:s}){return[e(n.A,t._b({attrs:{icon:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",s,!1),[e(m.A,[t._v("mdi-close")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},S=[],w=(s(4114),s(5353)),D={name:"StudentListView",data:()=>({filters:{course:null,year:null,section:null},deleteDialog:!1,options:{page:1,itemsPerPage:10,search:""},headers:[{text:"Student Name",value:"user.fullName",sortable:!0},{text:"Student ID",value:"studentId",sortable:!0},{text:"Course",value:"course",sortable:!0},{text:"Status",value:"enrollmentStatus",sortable:!0},{text:"Actions",value:"actions",sortable:!1,align:"end"}],loading:!1,studentToDelete:null,snackbar:!1,snackbarColor:"",snackbarText:""}),computed:{...(0,w.aH)("students",["students","totalStudents"])},methods:{...(0,w.i0)("students",["fetchStudents","deleteStudent"]),getStatusColor(t){const e={pending:"warning",evaluated:"info",enrolled:"success"};return e[t]||"warning"},resetFilters(){this.filters={course:null,year:null,section:null},this.fetchStudents()},applyFilters(){this.options.page=1,this.fetchStudents({...this.options,filters:this.filters})},downloadExcel(){},downloadPDF(){},confirmDelete(t){this.studentToDelete=t,this.deleteDialog=!0},async handleDelete(){this.loading=!0;try{await this.deleteStudent(this.studentToDelete._id),this.showSnackbarMessage("Student deleted successfully!","success"),this.fetchStudents()}catch(t){this.showSnackbarMessage(t.response?.data?.message||"Failed to delete student!","error")}finally{this.loading=!1,this.deleteDialog=!1}},showSnackbarMessage(t,e){this.snackbarText=t,this.snackbarColor=e,this.snackbar=!0},async handleSearch(){this.options.page=1,await this.fetchStudents()},selectStudent(t){this.$router.push({name:"Student Profile",params:{id:t._id}})}},created(){this.fetchStudents()}},F=D,N=s(1656),T=(0,N.A)(F,C,S,!1,null,"32bc33bb",null),P=T.exports}}]);
//# sourceMappingURL=398.24fddffb.js.map